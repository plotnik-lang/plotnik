---
source: crates/plotnik-lib/src/emit/codegen_tests.rs
---
Item = (identifier) @name
Collect = {(Item) @item}* @items
Test = (parent (Collect))
---
[flags]
linked = false

[strings]
S0 "Beauty will save the world"
S1 "name"
S2 "item"
S3 "items"
S4 "Item"
S5 "Collect"
S6 "Test"
S7 "identifier"
S8 "parent"

[type_defs]
T0 = <Node>
T1 = Struct  M0:1  ; { name }
T2 = Struct  M1:1  ; { item }
T3 = ArrayStar(T2)  ; T2*
T4 = Struct  M2:1  ; { items }

[type_members]
M0: S1 → T0  ; name: <Node>
M1: S2 → T1  ; item: Item
M2: S3 → T3  ; items: T3

[type_names]
N0: S4 → T1  ; Item
N1: S5 → T4  ; Collect
N2: S6 → T4  ; Test

[entrypoints]
Collect = 09 :: T4
Item    = 01 :: T1
Test    = 16 :: T4

[transitions]
  00   ε                                    ◼

Item:
  01   ε                                    02
  02   ε   [Obj]                            04
  04   !   (identifier) [Node Set(M0)]      06
  06   ε   [EndObj]                         08
  08                                        ▶

Collect:
  09   ε                                    10
  10   ε   [Obj]                            12
  12   ε   [Arr]                            14
  14   ε                                    40, 28

Test:
  16   ε                                    17
  17   !   (parent)                         18
  18   ▽   (Collect)                        09 : 19
  19   △                                    20
  20                                        ▶
  21   ε   [EndObj Push]                    23
  23   ε                                    46, 28
  25                                        ▶
  26   ε   [EndObj]                         25
  28   ε   [EndArr Set(M2)]                 26
  30   ε   [Set(M1)]                        21
  32   !   (Item)                           01 : 30
  33   ε   [Obj]                            32
  35   ▷                                    38
  36   ε                                    35, 28
  38   ε                                    33, 36
  40   !                                    38
  41   ▷                                    44
  42   ε                                    41, 28
  44   ε                                    33, 42
  46   ▷                                    44
